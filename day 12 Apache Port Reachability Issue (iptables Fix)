ğŸ“Œ Task Overview

The monitoring system reported that Apache was not reachable on port 5003 on one of the application servers (stapp01) in the Stratos Datacenter.

The issue could be due to:

Apache service being down

Port not listening

Firewall / iptables blocking traffic

Network-level restrictions

The goal was to identify the root cause and fix it without compromising existing security settings.
ğŸ–¥ï¸ Environment

Jump Host: jumphost

App Server: stapp01

Service: Apache (httpd)

Port: 5003

Firewall: iptables (firewalld not installed)
ğŸ” Troubleshooting & Diagnosis
1ï¸âƒ£ Check Apache Service Status
sudo systemctl status httpd


Observation:

Apache was installed

Service initially failed due to port binding conflict

After restart, Apache was running normally
2ï¸âƒ£ Verify Apache Is Listening on Port 5003
sudo netstat -tulnp | grep 5003


Expected Output:

LISTEN ... httpd


âœ”ï¸ Confirms Apache is actively listening on port 5003
3ï¸âƒ£ Test Connectivity from Jump Host
curl http://stapp01:5003


Initial Error:

No route to host


âœ”ï¸ Indicates a network or firewall-level block, not an Apache issue
4ï¸âƒ£ Check Firewall Service
sudo systemctl status firewalld


Output:

Unit firewalld.service could not be found


âœ”ï¸ Confirms firewalld is not used
âœ”ï¸ System relies on iptables

5ï¸âƒ£ Inspect iptables Rules
sudo iptables -L -n
Key Finding:

INPUT chain ended with:

REJECT all -- reject-with icmp-host-prohibited


Port 5003 was not explicitly allowed

Resulted in â€œNo route to hostâ€ from jump host

ğŸ› ï¸ Solution (Correct & Secure Fix)
âœ… Allow Port 5003 via iptables

Inserted an allow rule before the REJECT rule:

sudo iptables -I INPUT 4 -p tcp --dport 5003 -m state --state NEW -j ACCEPT
ğŸ” Verify Rule Order
sudo iptables -L -n --line-numbers


Expected:

ACCEPT tcp dpt:5003
REJECT all reject-with icmp-host-prohibited


âœ”ï¸ Port 5003 now allowed
âœ”ï¸ Firewall security preserved
ğŸ” Restart Apache (Safe Step)
sudo systemctl restart httpd

âœ… Final Validation
From Jump Host
curl http://stapp01:5003


Result:

HTML content returned (Apache default test page)

Confirms Apache is reachable externally on port 5003
ğŸ¯ Outcome

âœ”ï¸ Apache reachable on port 5003
âœ”ï¸ No security services disabled
âœ”ï¸ No firewall flushed
âœ”ï¸ No index.html modified
âœ”ï¸ Root cause properly identified and fixed

ğŸ§  Key Learning (Interview-Ready)

â€œNo route to hostâ€ â†’ Firewall or network rejection (iptables REJECT)

firewalld absence â‰  no firewall

iptables rule order is critical

Always prefer minimal, port-specific firewall changes
