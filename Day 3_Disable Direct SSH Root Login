# ğŸ” Task 3: Disable Direct SSH Root Login

## ğŸ“˜ Task Description

As part of the **xFusionCorp Project Nautilus (KodeKloud Labs)**, the system administration team must enhance server security by **disabling direct SSH login for the root user** on all **Application Servers** in the **Stratos Datacenter**.

Direct root login over SSH is a security risk and is considered a bad practice in production environments.

---

## ğŸ¯ Objective

* Disable SSH access for the `root` user
* Apply the change on **all App Servers**
* Ensure SSH service remains functional for normal users

---

## ğŸ§© Servers Involved

* `stapp01`
* `stapp02`
* `stapp03`

---

## ğŸ› ï¸ Steps Performed

### 1ï¸âƒ£ SSH into the App Server

```bash
ssh tony@stapp01
```

---

### 2ï¸âƒ£ Switch to Root User

```bash
sudo su -
```

---

### 3ï¸âƒ£ Edit SSH Server Configuration

```bash
vi /etc/ssh/sshd_config
```

Find the following line:

```text
#PermitRootLogin yes
```

Change it to:

```text
PermitRootLogin no
```

---

### 4ï¸âƒ£ Restart SSH Service

```bash
systemctl restart sshd
```

Verify status:

```bash
systemctl status sshd
```

---

### 5ï¸âƒ£ Validate Root Login is Disabled

```bash
ssh root@stapp01
```

âœ… Expected Output:

```text
Permission denied, please try again.
```

---

### 6ï¸âƒ£ Repeat on All App Servers

Repeat the same steps on:

* `stapp02`
* `stapp03`

---

## ğŸ” Additional Verification (Optional)

```bash
sshd -T | grep permitrootlogin
```

Expected output:

```text
permitrootlogin no
```

---

## ğŸ§  Why This Task Matters (Real-World Use)

* Prevents brute-force attacks on the `root` account
* Enforces **least privilege access**
* Improves auditing and accountability
* Required by security standards like **CIS Benchmarks**, **SOC2**, and **ISO 27001**

---

## âœ… Final Result

âœ” Direct SSH login for root user is disabled
âœ” SSH access works for non-root users
âœ” Configuration applied across all App Servers

---

## ğŸ“Œ Learning Outcome

* Difference between `ssh_config` (client) and `sshd_config` (server)
* How SSH authentication is controlled on Linux servers
* How to securely validate SSH hardening changes

---

## ğŸ” Commands Used to Find & Verify Configuration (For Reference)

### ğŸ”¹ Find a word or setting in a config file

```bash
grep PermitRootLogin /etc/ssh/sshd_config
```

Case-insensitive search:

```bash
grep -i permitrootlogin /etc/ssh/sshd_config
```

Show line number (useful for audits):

```bash
grep -in permitrootlogin /etc/ssh/sshd_config
```

---

### ğŸ”¹ Search inside a file using `vi`

```bash
vi /etc/ssh/sshd_config
```

Inside `vi`, type:

```text
/PermitRootLogin
```

* Press `n` â†’ next match
* Press `N` â†’ previous match

---

### ğŸ”¹ Check the active (runtime) SSH configuration

```bash
sshd -T | grep permitrootlogin
```

Expected output:

```text
permitrootlogin no
```

---

### ğŸ”¹ Test root SSH login (validation)

```bash
ssh root@stapp01
```

Expected result:

```text
Permission denied, please try again.
```

---

ğŸ§‘â€ğŸ’» **Part of: 100 Days of DevOps / Linux Practice Series**
